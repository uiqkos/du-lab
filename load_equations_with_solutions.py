import base64
import lzma
import json
import re

import sympy


def phapl_populate_cache(b64):
    decoded_data = base64.b64decode(b64)

    try:
        decompressed_data = lzma.decompress(decoded_data)
    except lzma.LZMAError as error:
        print(f'Error decompressing lzma phapl\'s prepopulated cache: {error}')
        return

    try:
        json_data = json.loads(decompressed_data.decode('utf-8'))
    except json.JSONDecodeError as error:
        print(f'Error parsing JSON data: {error}')
        return

    return json_data


point_type_regexp = r'Тип особой точки: (.*?)\.'
stability_regexp = r'Устойчивость: (.*?)\.'
point_regexp = r'Точка (.*?)\.'


def parse(json_data):
    res = []
    for equation in json_data:
        eq = equation[0]
        text = equation[1]

        json_eq = {
            'equation': eq,
            # 'text': text,
            'points': []
        }

        if len(re.findall(point_type_regexp, text)) < 1 or len(re.findall(stability_regexp, text)) < 1 \
            or len(re.findall(point_regexp, text)) < 1:
            print(re.findall(point_type_regexp, text))
            print(re.findall(stability_regexp, text))
            print(re.findall(point_regexp, text))
            print(text)
            exit(9)

        for point, point_type, stability in zip(
            re.findall(point_regexp, text),
            re.findall(point_type_regexp, text),
            re.findall(stability_regexp, text)
        ):
            json_eq['points'].append({
                'point': point,
                'point_type': point_type,
                'stability': stability
            })

        res.append(json_eq)

    return res


def get_eqs():
    a = ('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')

    result = parse(phapl_populate_cache(a))

    clean = re.compile('<.*?>')

    for i, eq in enumerate(result):
        for j, point in enumerate(eq['points']):
            point['stability'] = re.sub(clean, '', point['stability'])
            point['point_type'] = re.sub(clean, '', point['point_type'])
            result[i]['points'][j]['stability'] = ''.join(
                filter(lambda x: x.isalnum() or x == ' ', point['stability'])).strip()
            result[i]['points'][j]['point_type'] = ''.join(
                filter(lambda x: x.isalnum() or x == ' ', point['point_type'])).strip()

    return result


def get_coefficient_of_var(polynomial_str, var_str):
    polynomial_expr = sympy.sympify(polynomial_str)
    var = sympy.symbols(var_str)
    poly_obj = sympy.Poly(polynomial_expr, var)
    coefficient = poly_obj.coeff_monomial(var)

    return coefficient


def parse_equation(eqs: str) -> list[list[float]]:
    eqs.replace('"', '')
    eqs = eqs.split(',')
    eqs = [eq.strip() for eq in eqs]

    return [[
        get_coefficient_of_var(eq, 'x'), get_coefficient_of_var(eq, 'y')
    ] for eq in eqs]
